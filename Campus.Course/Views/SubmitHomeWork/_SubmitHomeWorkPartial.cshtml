<script type="text/javascript">
    $(function () {
        $('#menuHomeWork').accordion({
            heightStyle: "content",
            beforeActivate: function (event, ui) {
                var div = ui.newPanel;
                if (div.attr('loaded') == "false") {
                    div.attr('loaded', 'true');
                }
            }
        });

    });

    function submithomework(id) {
        var commits = $("#commits" + id).val();
        $.post(
          '/SubmitHomeWork/SubmitHomeWork',
          {
              id: id,
              commits: commits
          },
          function (data) {
              alert('提交成功');
          }
        )
    }
</script>

<div id="menuHomeWork">
   @foreach (Campus.Course.Model.Business.HomeWorkInfo t in ViewBag.HomeWorks)
        {
            var statuscn = "未交";
            if (t.HomeWork.Status == Campus.Course.Utility.HomeWorkStatus.Submit)
            {
                statuscn = "已交";
            }
            else if (t.HomeWork.Status == Campus.Course.Utility.HomeWorkStatus.Late)
            {
                statuscn = "晚交";
            }
            var reviwedcn = t.HomeWork.Score == null ? "未批改" : t.HomeWork.Score;
            <h3>第 @t.WeekInQGrade.Week 周 | @t.HomeWorkPush.Subject | @statuscn | @reviwedcn</h3> 
            <div id="@t.HomeWork.ID" loaded="false">
                  <ul class="form_input_area">
                      <li>
                           <div class="parameter_name"><span>作业题目</span></div>
                           <div class="parameter_input"><span>@Html.DisplayFor(model=>t.HomeWorkPush.Subject)</span></div>       
                      </li>
                      <li>
                           <div class="parameter_name"><span>作业要求</span></div>
                           <div class="parameter_input"><span>@Html.DisplayFor(model=>t.HomeWorkPush.Description)</span></div>       
                      </li>
                      <li>
                           <div class="parameter_name"><span>作业描述</span></div>
                           <div>
                           @{
                               var commits = "commits" + t.HomeWork.ID;
                               <textarea id="@commits" style="width:400px;" rows="5"  >@t.HomeWork.Commits</textarea>
                            }
                           </div>  
                      </li>

                      <li>
                           @{
                               var jsfunction = "submithomework("+t.HomeWork.ID+")";
                               <input type="button" value="submit" onclick="@jsfunction"/>
                           }
                      </li>
                  </ul>
            </div>
        }
</div>